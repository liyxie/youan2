(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/checkin_noface/checkin_noface"],{5597:function(t,n,e){"use strict";e.r(n);var o=e("d5b5"),a=e.n(o);for(var c in o)["default"].indexOf(c)<0&&function(t){e.d(n,t,(function(){return o[t]}))}(c);n["default"]=a.a},6657:function(t,n,e){"use strict";e.r(n);var o=e("cdc0"),a=e("5597");for(var c in a)["default"].indexOf(c)<0&&function(t){e.d(n,t,(function(){return a[t]}))}(c);e("faf5");var i=e("828b"),s=Object(i["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);n["default"]=s.exports},c86f:function(t,n,e){"use strict";(function(t,n){var o=e("47a9");e("cb63");o(e("3240"));var a=o(e("6657"));t.__webpack_require_UNI_MP_PLUGIN__=e,n(a.default)}).call(this,e("3223")["default"],e("df3c")["createPage"])},cdc0:function(t,n,e){"use strict";e.d(n,"b",(function(){return o})),e.d(n,"c",(function(){return a})),e.d(n,"a",(function(){}));var o=function(){var t=this.$createElement;this._self._c},a=[]},d5b5:function(t,n,e){"use strict";(function(t,o){var a=e("47a9");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c,i=a(e("2b60")),s=(e("63f7"),e("3f2b")),u={data:function(){return{canCheckin:!0,showCamera:!0,showImage:!1,status:"",currentTime:"",brand:"",ranking_work:"",ranking_off:""}},onShow:function(){var n=this;n.updateClock(),n.getDeviceInfo(),n.ajax(n.url.validCanCheckIn,"GET",null,(function(e){i.default.logging("查看是否可以考勤",e);var o=e.data.data;n.status=o.status,n.ranking_work=o.rankingWork,n.ranking_off=o.rankingOff,console.log(n.status),"当前可以考勤"!=o.status&&"今天已上班打卡"!=o.status?(n.canCheckin=!1,setTimeout((function(){t.showToast({title:o.status,icon:"none"})}),500)):setTimeout((function(){t.showToast({title:o.status})}),500)}))},methods:{getDeviceInfo:function(){o.getSystemInfo({success:function(t){c=t.brand,console.log(c)},fail:function(t){console.log(t)}})},updateClock:function(){var t=this;function n(){var n=new Date,e=n.getHours().toString().padStart(2,"0"),o=n.getMinutes().toString().padStart(2,"0"),a=n.getSeconds().toString().padStart(2,"0"),c="".concat(e,":").concat(o,":").concat(a);t.currentTime=c}n(),setInterval((function(){n()}),1e3)},checkin:function(){var n=this;"今天已下班打卡"!=n.status?t.getLocation({type:"gcj02",isHighAccuracy:!0,altitude:!0,success:function(t){console.log("Latitude: "+t.latitude+", Longitude: "+t.longitude);var e=new s.AMapWX({key:"e72d98c1eb004028c9bef97abe5bbd82"});e.getRegeo({location:"".concat(t.longitude,",").concat(t.latitude),success:function(t){var e=this.location,o=t[0].regeocodeData.formatted_address;console.log("所在位置：",o),n.address=o,n.geographicLocation=e,n.toCheckin(o)},fail:function(){console.log("逆地理编码失败")}})},fail:function(t){console.error("Location acquisition failed: "+JSON.stringify(t))},complete:function(){console.log("getLocation operation is complete")}}):setTimeout((function(){t.showToast({title:n.status,complete:setTimeout((function(){t.navigateBack({url:"../index/index"})}),500)})}),500)},toCheckin:function(n){var e={};e.address=n,e.brand=c,console.log(e),this.ajax(this.url.checkinNoFace,"POST",e,(function(n){var e=n.data;if(console.log(e),200===n.statusCode)switch(e.code){case 500:t.showToast({title:e.message,icon:"none"});break;case 200:var o=e.data.identification;1==o?t.showToast({title:"上班打卡成功",complete:function(){t.navigateBack({url:"../index/index"})}}):t.showToast({title:"下班打卡成功",complete:function(){t.navigateTo({url:"../my_checkin/my_checkin"})}});break}else t.showToast({title:"系统错误！",icon:"none"})}))}}};n.default=u}).call(this,e("df3c")["default"],e("3223")["default"])},ef55:function(t,n,e){},faf5:function(t,n,e){"use strict";var o=e("ef55"),a=e.n(o);a.a}},[["c86f","common/runtime","common/vendor"]]]);